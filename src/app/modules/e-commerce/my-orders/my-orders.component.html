<div class="container mx-auto p-4 min-h-[80vh]">
  <h1 class="text-3xl font-bold my-5">Mis Compras</h1>
  @if (orders.length === 0) {
    <div class="text-center text-gray-500">No tienes compras.</div>
  }
  @if (orders.length > 0) {
    <div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        @for (order of orders; track order) {
          @let daysLeft = getDaysLeft(order.requiredDate, order.orderDate);
          <div class="border-2 p-4 rounded-lg flex justify-between gap-2 flex-wrap items-start" [ngClass]="{
            'border-orange': order.orderStatus === 'Pendiente',
            'border-green-500': order.orderStatus === 'Pagado',
            'border-purple-200': order.orderStatus === 'Cancelado'
          }">
            <div>
              <h2 class="text-xl font-semibold">Compra #{{ order.id }}</h2>
              <p class="text-gray-600">Fecha de la Orden: {{ order.orderDate | date }}</p>
              <p class="text-gray-600">Estado de la Orden: {{ order.orderStatus }}</p>
              <p class="text-gray-800 font-medium">Total: S/ {{ order.total | number: '1.2-2' }}</p>
              @if (order.orderStatus === 'Pendiente') {
                @if (daysLeft > 0) {
                  <p class="text-gray-600 text-sm mt-2">Tiempo restante: {{ daysLeft }} d√≠as</p>
                } @else {
                  <p class="text-gray-600">La compra ya ha expirado</p>
                }
              }
            </div>
            @if (order.orderStatus === 'Pendiente') {
              <app-button
                text="Pagar"
                (handleClick)="payOrder(order.sessionId)"
                class="text-white rounded"
              ></app-button>
            }
          </div>
        }
      </div>
    </div>
  }
</div>
